<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Foundation | Welcome</title>
    <link rel="stylesheet" href="/static/css/foundation.css" />
    <script src="/static/js/vendor/modernizr.js"></script>



<script>
	function setCookie(cname, cvalue, exdays) 
	{
	alert("guys im here");
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname+"=" + cvalue + "; " + expires;
	}

	function getCookie(cname) {
	    var name = cname + "=";
	    var ca = document.cookie.split(';');
	    for(var i=0; i<ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0)==' ') c = c.substring(1);
	        if (c.indexOf(name) != -1) return c.substring(name.length, c.length);
	    }
	    return "";
	}

	function checkCookie() {
	    var acType = getCookie("AccountType");
	    if (acType == 1) {
	        alert("Welcome back mr Stark." + acType);
	        return "Admin"
	    } else 
	    	{
			alert("We must turn back mr frodo");
	        return "General"
	        }
	    }
	
</script>

  </head>



  <body>




<div class="fixed">

<!-- Top Bar Code, Copy Paste this on other pages for consistency -->
  <nav class="top-bar" data-topbar role="navigation">
    <ul class="title-area">
      <li class="name">
        <h1 id="button_Green" ><a href="/" style="color: #29A329"> Garden Fresh Box</a></h1>
      </li>
      <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>

    <section class="top-bar-section">
        <!-- Left Nav Section -->
    
	<div id="Controller" class="left">

	</div>

      <!-- Right Nav Section -->
	<ul class="right">
		<li><a href="/BuyGoodies">Buy Goodies</a></li>
		<li><a href="/Recipes">Recipes</a></li>
		<li><a href="/PickupLocations">Pickup Locations</a></li>
		<li><a href="/News">News</a></li>
		<li><a href="/FAQ">F.A.Q.</a></li>
		<li><a href="/Contact">Contact us</a></li>
		<li class="has-form">
		<button id="dropButton" data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" data-options="align:left">Login</button>

		</li>

	</ul>

    </section>

  </nav>

  			<!-- Top bar messes with formatting, reference the dropdown here instead to fix -->


				<ul id="drop1" class="f-dropdown small"  data-dropdown-content aria-hidden="true" tabindex="-1">
					<form>
					<fieldset>
					<legend>Credentials</legend>
						  <div class="row collapse">
						    <div class="small-3 columns">
						      <span class="prefix">username:</span>
						    </div>
						    <div class="small-9 columns">
						      <input id="userInput" type="text" placeholder="...">
						    </div>
						  </div>

						  <div class="row collapse">
						    <div class="small-3 columns">
						      <span class="prefix">password:</span>
						    </div>
						    <div class="small-9 columns">
						      <input id="passInput" type="text" placeholder="...">
						    </div>
						  </div>
						<div class="row collapse">  	
						<div class="small-9 columns">
							<a  onClick="Login()" href="#" class="button tiny radius">Submit</a>
							<a  onClick="Click('dropButton') " href="#" class="button tiny radius">Cancel</a>	
										
						</div></div>

					</fieldset>
					</form>
				</ul>
<!-- Top Bar Code End-->
</div>

<div class="flex-video">
        <iframe width="420" height="315" src="//www.youtube.com/embed/Sg0JUw77cro" frameborder="0" allowfullscreen></iframe>
</div>

	<label> If you are interested in purchasing a Garden Fresh Box, volunteering or setting up a host site in your neighbourhood, or if you are a grower interested in selling your produce, please call (519) 821-6638 ext. 344 or email gfbox@guelphchc.ca.</label>







<!--	<div id="map_canvas" style="width: 100%; height: 480px"> </div> -->
	<!-- Dependency Scripts -->
  <script src="/static/js/vendor/jquery.js"></script>
  <script src="/static/js/foundation/foundation.js"></script>

  <script src="/static/js/foundation/foundation.topbar.js"></script>
  <script src="/static/js/foundation/foundation.dropdown.js"></script>
  <script src="/static/js/foundation/foundation.tab.js"></script>
  <script src="/static/js/foundation/foundation.slider.js"></script>
  <script src="/static/js/foundation/foundation.reveal.js"></script>

  <!-- Other JS plugins can be included here -->
  <script>
    $(document).foundation();
  </script>


  <script>
    $(document).foundation();

 <!-- Ajax POSTS -->
 	<!-- Given TextBox ID's Constructs the Ajax POST and sends -->
 	function CheckLogin()
 	{
 	var theDiv = document.getElementById("Controller");
 		if(checkCookie()=="Admin")
 		{
 		alert("COOKIE IS ADMIN!");
		theDiv.innerHTML +='<li class="has-dropdown"><a href="#">Admin Controls</a><ul class="dropdown"><li><button href="/Admin_Users">View and Edit Coordinators</button></li><li><a href="/Admin_HostSites">View and Edit HostSites</a></li><li><a href="/Admin_Sales">View and Edit Sales</a></li></ul></li>';
 		}

 	};



    function Login() {
    alert("LOGGING IS BEING PERFORMED");

       $.ajax({
        url: "http://localhost:8080/",  
        type: "post",
        data: {
        field1: "Login",
        field2: document.getElementById('userInput').value,  
        field3: document.getElementById('passInput').value, 


        },


        dataType: 'json',
        success: function(response) {

		var myObject = JSON.parse(response);        	

		setCookie("AccountType",myObject[6],10); 

        },
        error: function(jqXHR, textStatus, errorThrown){
            alert(textStatus, errorThrown);
        }

		});

		
    };
 <!--------------->
<!-- Button Click -->
	function Click(btnID) 
	{document.getElementById(btnID).click();}




    function SetInputText(id,n, a, c, pr,po,h) 
    {
	document.getElementById('hidden_ID').value=id;
	document.getElementById('input_HostSite Name').value=n;
	document.getElementById('input_Address').value=a;
	document.getElementById('input_City').value=c;
	document.getElementById('input_Province').value=pr;
	document.getElementById('input_postalCode').value=po;
	document.getElementById('input_hoursOfOperation').value=h;
    };


	window.onload = CheckLogin;
  </script>


  </body>
</html>